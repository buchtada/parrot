<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parrot Forecast</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --black: #0a0a0a;
            --charcoal: #1a1a1a;
            --grey-dark: #2a2a2a;
            --grey-mid: #4a4a4a;
            --grey-light: #9a9a9a;
            --grey-lighter: #d0d0d0;
            --white: #ffffff;
            --gold: #d4af37;
            --gold-dim: #a68929;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--black);
            color: var(--grey-lighter);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        .app {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            padding: 2rem 4rem;
            border-bottom: 1px solid var(--grey-dark);
            background: var(--charcoal);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 0.5rem;
        }

        .title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--white);
            letter-spacing: -0.5px;
        }

        .subtitle {
            font-size: 0.875rem;
            color: var(--grey-light);
            font-weight: 400;
        }

        .stats-bar {
            display: flex;
            gap: 3rem;
            margin-top: 1.5rem;
            font-size: 0.813rem;
        }

        .stat {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .stat-label {
            color: var(--grey-mid);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.688rem;
            font-weight: 500;
        }

        .stat-value {
            color: var(--white);
            font-weight: 500;
            font-size: 0.938rem;
        }

        .main {
            flex: 1;
            padding: 2rem 4rem 4rem;
        }

        .section {
            margin-bottom: 3rem;
        }

        .section-header {
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--grey-light);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .chart-container {
            background: var(--charcoal);
            border: 1px solid var(--grey-dark);
            border-radius: 4px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }

        .metric-card {
            background: var(--charcoal);
            border: 1px solid var(--grey-dark);
            border-radius: 4px;
            padding: 1.5rem;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: transparent;
            transition: background 0.2s ease;
        }

        .metric-card:hover {
            border-color: var(--grey-mid);
            transform: translateY(-1px);
        }

        .metric-card:hover::before {
            background: var(--gold);
        }

        .metric-card.best::before {
            background: var(--gold);
        }

        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.75rem;
        }

        .method-name {
            font-size: 0.938rem;
            font-weight: 500;
            color: var(--white);
            letter-spacing: -0.2px;
        }

        .smape {
            font-size: 1.5rem;
            font-weight: 300;
            color: var(--grey-lighter);
            font-feature-settings: 'tnum';
        }

        .smape.best {
            color: var(--gold);
        }

        .method-desc {
            font-size: 0.813rem;
            color: var(--grey-mid);
            margin-bottom: 1.25rem;
            line-height: 1.5;
        }

        .metrics-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--grey-dark);
        }

        .metric-item {
            text-align: center;
        }

        .metric-item-label {
            font-size: 0.688rem;
            color: var(--grey-mid);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.375rem;
            font-weight: 500;
        }

        .metric-item-value {
            font-size: 1.125rem;
            color: var(--white);
            font-weight: 400;
            font-feature-settings: 'tnum';
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
            font-size: 0.875rem;
            color: var(--grey-mid);
        }

        .error {
            padding: 2rem;
            background: rgba(200, 50, 50, 0.1);
            border: 1px solid rgba(200, 50, 50, 0.3);
            border-radius: 4px;
            color: #ff6b6b;
            font-size: 0.875rem;
        }

        @media (max-width: 1200px) {
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            .header, .main {
                padding-left: 2rem;
                padding-right: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <div class="header">
            <div class="header-top">
                <h1 class="title">Parrot Forecast</h1>
                <div class="subtitle">Time Series Analysis</div>
            </div>
            <div class="stats-bar">
                <div class="stat">
                    <div class="stat-label">Context</div>
                    <div class="stat-value" id="context-length">—</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Horizon</div>
                    <div class="stat-value" id="forecast-horizon">—</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Pattern</div>
                    <div class="stat-value" id="pattern-length">—</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Step</div>
                    <div class="stat-value" id="time-step">—</div>
                </div>
            </div>
        </div>

        <div class="main">
            <div id="loading" class="loading">Loading forecast data...</div>
            <div id="content" style="display: none;">
                <div class="section">
                    <div class="chart-container">
                        <div id="main-plot"></div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-header">
                        <h2 class="section-title">Performance Metrics</h2>
                    </div>
                    <div class="metrics-grid" id="metrics-grid"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        Promise.resolve({ json: () => Promise.resolve({"metadata": {"dt": 0.1001001001001001, "context_length": 700, "test_horizon": 100, "pattern_length": 50}, "time": {"context": [55.05505505505506, 55.15515515515516, 55.25525525525526, 55.35535535535536, 55.45545545545546, 55.55555555555556, 55.65565565565566, 55.75575575575576, 55.85585585585586, 55.95595595595596, 56.05605605605606, 56.15615615615616, 56.25625625625626, 56.35635635635636, 56.45645645645646, 56.55655655655656, 56.65665665665666, 56.75675675675676, 56.85685685685686, 56.95695695695696, 57.05705705705706, 57.15715715715716, 57.25725725725726, 57.35735735735736, 57.45745745745746, 57.55755755755756, 57.65765765765766, 57.75775775775776, 57.85785785785786, 57.95795795795796, 58.05805805805806, 58.15815815815816, 58.25825825825826, 58.35835835835836, 58.45845845845846, 58.55855855855856, 58.65865865865866, 58.75875875875876, 58.85885885885886, 58.95895895895896, 59.05905905905906, 59.15915915915916, 59.25925925925926, 59.35935935935936, 59.45945945945946, 59.55955955955956, 59.65965965965966, 59.75975975975976, 59.85985985985987, 59.95995995995997, 60.06006006006007, 60.16016016016017, 60.26026026026027, 60.36036036036037, 60.46046046046047, 60.56056056056057, 60.66066066066067, 60.76076076076077, 60.86086086086087, 60.96096096096097, 61.06106106106107, 61.16116116116117, 61.26126126126127, 61.36136136136137, 61.46146146146147, 61.56156156156157, 61.66166166166167, 61.76176176176177, 61.86186186186187, 61.96196196196197, 62.06206206206207, 62.16216216216217, 62.26226226226227, 62.36236236236237, 62.46246246246247, 62.56256256256257, 62.66266266266267, 62.76276276276277, 62.86286286286287, 62.96296296296297, 63.06306306306307, 63.16316316316317, 63.26326326326327, 63.36336336336337, 63.46346346346347, 63.56356356356357, 63.66366366366367, 63.76376376376377, 63.86386386386387, 63.96396396396397, 64.06406406406407, 64.16416416416416, 64.26426426426427, 64.36436436436436, 64.46446446446447, 64.56456456456456, 64.66466466466467, 64.76476476476476, 64.86486486486487, 64.96496496496496, 65.06506506506507, 65.16516516516516, 65.26526526526527, 65.36536536536536, 65.46546546546547, 65.56556556556556, 65.66566566566567, 65.76576576576576, 65.86586586586587, 65.96596596596596, 66.06606606606607, 66.16616616616616, 66.26626626626627, 66.36636636636636, 66.46646646646647, 66.56656656656656, 66.66666666666667, 66.76676676676676, 66.86686686686687, 66.96696696696696, 67.06706706706707, 67.16716716716716, 67.26726726726727, 67.36736736736736, 67.46746746746747, 67.56756756756756, 67.66766766766767, 67.76776776776777, 67.86786786786787, 67.96796796796797, 68.06806806806807, 68.16816816816817, 68.26826826826827, 68.36836836836838, 68.46846846846847, 68.56856856856858, 68.66866866866867, 68.76876876876878, 68.86886886886887, 68.96896896896898, 69.06906906906907, 69.16916916916918, 69.26926926926927, 69.36936936936938, 69.46946946946947, 69.56956956956958, 69.66966966966967, 69.76976976976978, 69.86986986986987, 69.96996996996998], "test": [70.07007007007007, 70.17017017017018, 70.27027027027027, 70.37037037037038, 70.47047047047047, 70.57057057057058, 70.67067067067067, 70.77077077077078, 70.87087087087087, 70.97097097097098, 71.07107107107107, 71.17117117117118, 71.27127127127127, 71.37137137137138, 71.47147147147147, 71.57157157157158, 71.67167167167167, 71.77177177177178, 71.87187187187187, 71.97197197197198, 72.07207207207207, 72.17217217217218, 72.27227227227228, 72.37237237237238, 72.47247247247248, 72.57257257257258, 72.67267267267268, 72.77277277277278, 72.87287287287288, 72.97297297297298, 73.07307307307308, 73.17317317317318, 73.27327327327328, 73.37337337337338, 73.47347347347348, 73.57357357357358, 73.67367367367368, 73.77377377377378, 73.87387387387388, 73.97397397397398, 74.07407407407408, 74.17417417417418, 74.27427427427428, 74.37437437437438, 74.47447447447448, 74.57457457457458, 74.67467467467468, 74.77477477477478, 74.87487487487488, 74.97497497497498, 75.07507507507508, 75.17517517517518, 75.27527527527528, 75.37537537537538, 75.47547547547548, 75.57557557557558, 75.67567567567568, 75.77577577577578, 75.87587587587588, 75.97597597597598, 76.07607607607608, 76.17617617617618, 76.27627627627628, 76.37637637637638, 76.47647647647648, 76.57657657657658, 76.67667667667668, 76.77677677677679, 76.87687687687688, 76.97697697697699, 77.07707707707708, 77.17717717717719, 77.27727727727728, 77.37737737737739, 77.47747747747748, 77.57757757757759, 77.67767767767768, 77.77777777777779, 77.87787787787788, 77.97797797797799, 78.07807807807808, 78.17817817817819, 78.27827827827828, 78.37837837837839, 78.47847847847848, 78.57857857857859, 78.67867867867868, 78.77877877877879, 78.87887887887888, 78.97897897897899, 79.07907907907908, 79.17917917917919, 79.27927927927928, 79.37937937937939, 79.47947947947948, 79.57957957957959, 79.67967967967968, 79.77977977977979, 79.87987987987988, 79.97997997997999]}, "data": {"context": [-0.34499933410274175, -0.3738264593750869, -0.4063588657369779, -0.60239124197624, -0.763537292721197, -0.9509895005615585, -1.0722164271073575, -1.1486366587420864, -1.1465602760567946, -1.1812473075543928, -1.0817893592922077, -0.8553252641858908, -0.6963676330589216, -0.4631970623262864, -0.04962107862994939, 0.20468081058471982, 0.40518104227066165, 0.648953734276001, 0.6982301426202681, 0.7871297727899049, 0.7815502907064779, 0.8503902721645898, 0.8110138917031027, 0.8581080566022476, 1.0062250933327446, 0.9284774436750303, 1.062388396134004, 1.0167935941867337, 0.7571746489339133, 0.7036238277627118, 0.49304282731484106, 0.3470447876648638, 0.38042341725555173, 0.5322650645451703, 0.5626419230228926, 0.7296837787937448, 0.8529754515475548, 0.964585960544709, 1.1427023173282675, 1.1132936819951766, 1.1721369904657748, 1.104830174360617, 1.0452954087484363, 0.8505278844400086, 0.6187624594704294, 0.21635326202560073, -0.11346752257907726, -0.4566756411942823, -0.6595959017741189, -0.7485183232893562, -0.768893229533364, -0.8372429416609336, -0.7247348928792602, -0.7101358307030409, -0.8153385269004597, -0.8341344481778025, -1.0545969875349368, -1.1177775947742608, -1.1050616797119437, -0.8198617632891634, -0.6859698628973838, -0.5393414867129414, -0.38579722813231476, -0.40121614600680056, -0.2601437821099989, -0.48976990866591685, -0.6477789668266161, -0.7809849098658233, -0.936714475727569, -1.0583889529784127, -1.1792394744691306, -1.1456786948975473, -1.0570407471466718, -1.0043344959960638, -0.8361292850694247, -0.7036272599228953, -0.42091367640259425, -0.036534960154236684, 0.29937627203456824, 0.615044578380672, 0.6446764915301926, 0.8769974667031666, 0.7927443364825945, 0.7536096716107781, 0.7180539301636654, 0.7254826174933857, 0.9318271810496827, 0.9891563464445607, 0.983987303380355, 0.9767788693925841, 0.9331446382414817, 0.8734484540350932, 0.5909004130224697, 0.3690256459150495, 0.34275673164408366, 0.3439639954157783, 0.3104881697166205, 0.5874443624339739, 0.7438680770808277, 0.9440223066141465, 1.1246881347872881, 1.1737221394452144, 1.1495380568040718, 1.1091810577878587, 1.2391565477562883, 0.9883787113747105, 0.7795173693493418, 0.4945332744187997, 0.17248966191626458, -0.1831463429452236, -0.49764158047608725, -0.7037795466448126, -0.7852167175929065, -0.8335098782737047, -0.8204106374479014, -0.7611869892024913, -0.7998348407138269, -0.7801461430221777, -1.0828488396932439, -0.9762488294586122, -0.9917768438844909, -1.098483512672271, -0.8744555458670547, -0.6937712350056828, -0.5696333386845116, -0.41789985060578294, -0.4011271802987591, -0.31535230698739797, -0.48324755485435067, -0.6281403995118228, -0.8168887756015734, -1.0456914549586298, -1.1154839385264879, -1.125813246896119, -1.230818477180323, -1.1031661546275229, -1.054840183019326, -0.8867709094613787, -0.5768889709037024, -0.27184826318067545, 0.03037717856268317, 0.42262119663926556, 0.554345626149093, 0.7846916793553497, 0.8350491696556249, 0.7797296608606539, 0.7867031919049916, 0.7107724019127315, 0.8703951310621344, 0.903750775521222], "test": [0.9783648476585441, 1.1065507813543283, 0.9925866871821741, 0.8474335918414052, 0.6696165481151359, 0.5930721505305119, 0.3520932083708748, 0.4350331478356214, 0.26695861367203905, 0.5598397280671175, 0.6383868797828572, 0.7880519932198013, 0.9135377417452476, 1.0753149847715842, 1.1296239758999052, 1.2227150746980255, 1.1632247850822899, 1.095968180497024, 0.9268910040149029, 0.7167739306218436, 0.4372297378680966, -0.0025062872583474227, -0.3168188199070924, -0.4883402155702343, -0.701459102035965, -0.804364668146041, -0.8026140137594209, -0.7612535703946096, -0.7939808993775741, -0.8378465841395052, -0.8664031977116933, -1.02078290792215, -1.0221945732665247, -1.13321209469808, -0.9177407788618152, -0.7938912231590134, -0.6192448551129168, -0.4158722224235871, -0.2797026529084093, -0.30049024319892054, -0.5193231080135229, -0.6296556037593297, -0.7613566131904889, -0.8859733048001488, -0.9898580329562066, -1.1431401167154818, -1.1493204745256314, -1.2052859381199383, -1.1535908311274268, -1.0801205813304846, -0.8620332691719736, -0.6109494670137691, -0.2641433128663683, 0.1783607205803482, 0.3812921517566905, 0.7827068791791026, 0.7980162547799108, 0.8161532575542864, 0.7460920980527156, 0.8024338572511194, 0.7519072452746675, 0.8483992531947824, 1.0635134633263308, 1.0164255227054249, 1.1130129122549637, 0.9743154844469595, 0.8807021903695089, 0.7926508813632513, 0.4923994362981257, 0.4829334318619516, 0.3799902685434463, 0.3607484651964096, 0.5389497576209965, 0.7147588107454967, 0.8604751446345967, 0.8920165820520303, 1.040054579442867, 1.1311232410495815, 1.1659710806511512, 1.1784172306318323, 1.0713058624777003, 0.8335026642775262, 0.6754761902394666, 0.37620535771468944, 0.03173905284461946, -0.26578321516996156, -0.5353436265478696, -0.7151748193599436, -0.806069780112274, -0.8819921755306039, -0.7517960253125693, -0.7595454083649326, -0.799743967777063, -0.9619377804457611, -1.04613792402427, -0.9981558164775215, -1.0394252080371285, -0.9055025367440854, -0.7744435106905395, -0.5884150114396602]}, "forecasts": {"context_parroting": {"name": "Context Parroting", "description": "Matches value patterns directly", "forecast": [1.0757404940172302, 1.013475089621854, 1.0169067816332036, 0.9698744509157377, 0.7005444249967027, 0.5879676745978448, 0.49058768292678223, 0.2689955524910724, 0.3751905956645532, 0.4775642560697516, 0.6539803724791674, 0.7183496543322863, 0.8641883096671444, 1.0737988274439658, 1.1417767699697647, 1.1787828300437273, 1.1775646011536516, 1.06241050452393, 0.9709501447069435, 0.754930519457176, 0.41161658751186303, 0.2034399058355225, -0.2009621653967369, -0.5663235775632092, -0.6663376698969449, -0.8404397780857473, -0.7653698490759249, -0.7227353772659533, -0.8075974789058618, -0.7464263338616918, -0.8482997726405558, -0.9235255504311961, -0.9441282126248499, -1.0629168200232064, -1.0160922267305537, -0.8758165524803481, -0.6874805814118401, -0.480171988291437, -0.3508415210092948, -0.3349120115387018, -0.3772243962506989, -0.5526867026724542, -0.6443698060048731, -0.8889754369117034, -0.8709153391117768, -1.0698003873632274, -1.1989084585032115, -1.2221188294557468, -1.1046859836181004, -1.0327184718915912, -0.7984565046189116, -0.5436340701665013, -0.24596078707211255, 0.05718008283481204, 0.3316209816301641, 0.614808930410308, 0.8100933877078923, 0.8174414354971812, 0.7288848143236524, 0.7768901562176248, 0.7971375919727813, 0.7917086912157238, 0.9355277251564753, 1.0187216687011773, 0.9983918674498875, 1.034127485468111, 0.922915020219108, 0.7730968127387793, 0.5894802977399161, 0.3310483790359229, 0.29806147860805754, 0.4080740116250447, 0.5217273549777242, 0.6787748117703443, 1.0096956140856945, 0.9891358415830788, 1.126239259409799, 1.1873471432812672, 1.201811388142346, 1.135441297079238, 1.1097113391459348, 0.8774158069312429, 0.6666016664825195, 0.34761639522290155, 0.03480615616810567, -0.1804449818862205, -0.6533992242854372, -0.6948259786205688, -0.8811159900732146, -0.8242699169432, -0.7205368691542181, -0.7654254189182992, -0.8620254451761771, -0.9263038061638568, -0.951392779075151, -1.08495882969074, -1.0307770402262355, -0.9478336744454308, -0.8228246598260529, -0.4969301264598272], "metrics": {"sMAPE": 12.4033402363383, "MAE": 0.06142344217010991, "RMSE": 0.07511673560011328}, "metadata": {"match_idx": 85, "correlation": 0.9969897540327025}}, "derivative_savgol": {"name": "Derivative Parroting (Savgol)", "description": "Mimics smooth derivative patterns", "forecast": [0.995242572483091, 0.9199418307109616, 0.9615399332363326, 0.9022168725544147, 0.7006089125085215, 0.5155248641416715, 0.36073855049692405, 0.25324270407006344, 0.29597484455471906, 0.4114948639690623, 0.5955293223371232, 0.7823281344510239, 0.8661843257604328, 0.9734388386977477, 1.088434668086511, 1.1119040860562548, 1.0527764063562055, 1.0038968000675383, 0.8865948921377342, 0.6249103690502771, 0.29544377898341356, -0.015159959941884904, -0.3738985955075038, -0.6955116652617872, -0.8424295869302575, -0.883943401638527, -0.8624601549472273, -0.785797666203452, -0.7592494105755213, -0.8500276903531492, -0.9509429480511535, -1.0717697672827406, -1.1373835077252858, -1.1117093806175378, -1.0122067595011806, -0.8732133356505263, -0.6865456198657995, -0.4429681182122362, -0.3757487555524248, -0.41310877955618847, -0.46398382962241347, -0.6365208399963802, -0.8166614706303605, -0.9559381054721847, -1.0835556876729888, -1.1959191080863976, -1.247885319572144, -1.2149788972142588, -1.1234821874345156, -0.9951085053080851, -0.7627207242670616, -0.536449668883528, -0.24248561502230914, 0.1299500052991901, 0.47100428997490335, 0.6568987970848126, 0.6697316666985533, 0.7189504980447875, 0.6528246515553101, 0.634671415223532, 0.6954070777837591, 0.7748257853176386, 0.8972680641849584, 1.0308512529412617, 1.0810563422431996, 0.9484343406190232, 0.7566835531198102, 0.6189474895109219, 0.41609100605334526, 0.32782336021862146, 0.3777920626778735, 0.3573151516431993, 0.38885456515992606, 0.61719570204972, 0.8261500582267527, 0.9599597305059019, 1.0206726389468752, 1.0218164031905237, 1.1016444478378726, 1.0901679199204077, 0.9770334520749818, 0.8290121886998663, 0.5558629416059064, 0.21013456726153912, -0.09390179242520458, -0.3991018405476589, -0.6233851291931714, -0.8205377657184838, -0.9523956522091223, -0.8607507641314642, -0.7737100579539762, -0.8547378648490804, -0.8584705692291384, -0.9220186682915174, -1.031325321711368, -1.0880541516314814, -1.0427690521167956, -0.8729646526547356, -0.7835223760092468, -0.6169930870301283], "metrics": {"sMAPE": 14.90034960057799, "MAE": 0.07405927786942522, "RMSE": 0.08923576769203274}, "metadata": {"match_idx": 273, "derivative_correlation": 0.9264002492227459, "method": "savgol"}}, "derivative_central": {"name": "Derivative Parroting (Central)", "description": "Mimics exact derivative patterns", "forecast": [0.9808092444971108, 0.9513923883050975, 0.9295920689520394, 0.7714108906337889, 0.5804575024748424, 0.4754791314398822, 0.31599307038649593, 0.25829452675538145, 0.3625788785447211, 0.5019737669520282, 0.6223664660832955, 0.727470434677284, 0.9051950212331238, 1.043989251384434, 1.0964812526843146, 1.1143751682762582, 1.0561890055163596, 0.9528817772930056, 0.7991417847596286, 0.5194750061620883, 0.24372969935126154, -0.06255967710303845, -0.4474414188024043, -0.6801291710525084, -0.8171872713137774, -0.8667033609032675, -0.8078511604933705, -0.8289649754083389, -0.8408104537062082, -0.8611616005735552, -0.9497112088583073, -0.9976254288504544, -1.0673210636464594, -1.1033030706993112, -1.0097529369278821, -0.8454471142685254, -0.6476248321740699, -0.4793053019727972, -0.4066753135964296, -0.4198667512171317, -0.5287540967840079, -0.662326801661095, -0.8304711687807196, -0.9437439353341714, -1.0341564105599335, -1.1981529702556508, -1.2743121913019104, -1.227200953859355, -1.132500775077277, -0.9793860355776827, -0.7348438347151378, -0.4585959759417383, -0.1581888994410816, 0.1306019849100567, 0.4094164086978047, 0.6486526117366688, 0.7499688642801053, 0.7093645775879853, 0.6890889379482071, 0.7232153267727717, 0.7306245942718211, 0.7998196608636681, 0.9133261496063948, 0.9447582207531009, 0.9524611291365678, 0.914722705521178, 0.7842073691565121, 0.6174900079169161, 0.3964657910654879, 0.25075638149955864, 0.2892691977941195, 0.40110213597895283, 0.5364525360516026, 0.7804366656055878, 0.9356171805119551, 0.9938890031740073, 1.0929946540231015, 1.130780718389375, 1.1048277952883603, 1.0587777707901547, 0.9297650257161572, 0.7082101893844496, 0.4433104835302789, 0.127412728373072, -0.13661796018148903, -0.48072065040826045, -0.7379111487754346, -0.8517695316693233, -0.9164915008306389, -0.8362019403711407, -0.8067796913586903, -0.8775239793696699, -0.9579631729924487, -1.0026468399419357, -1.0819743517053773, -1.1216664822809195, -1.0531039046582649, -0.9491277144581736, -0.7236759404653718, -0.51859573835244], "metrics": {"sMAPE": 18.254180264990246, "MAE": 0.08744045114051754, "RMSE": 0.10495210998558797}, "metadata": {"match_idx": 85, "derivative_correlation": 0.9579113329103073, "method": "central"}}}}) })
            .then(response => response.json())
            .then(data => {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('content').style.display = 'block';

                // Update stats
                document.getElementById('context-length').textContent = data.metadata.context_length;
                document.getElementById('forecast-horizon').textContent = data.metadata.test_horizon;
                document.getElementById('pattern-length').textContent = data.metadata.pattern_length;
                document.getElementById('time-step').textContent = data.metadata.dt.toFixed(4);

                createMainPlot(data);
                createMetricCards(data);
            })
            .catch(error => {
                document.getElementById('loading').innerHTML =
                    `<div class="error">Failed to load forecast data. Run: python generate_forecast_data.py</div>`;
            });

        function createMainPlot(data) {
            const traces = [
                {
                    x: data.time.context,
                    y: data.data.context,
                    name: 'Context',
                    mode: 'lines',
                    line: { color: '#4a4a4a', width: 1.5 },
                    hovertemplate: '%{y:.4f}<extra></extra>'
                },
                {
                    x: data.time.test,
                    y: data.data.test,
                    name: 'Actual',
                    mode: 'lines',
                    line: { color: '#ffffff', width: 2.5 },
                    hovertemplate: '%{y:.4f}<extra></extra>'
                }
            ];

            const colors = { context_parroting: '#666666', derivative_savgol: '#888888', derivative_central: '#d4af37' };

            for (const [key, forecast] of Object.entries(data.forecasts)) {
                traces.push({
                    x: data.time.test,
                    y: forecast.forecast,
                    name: forecast.name,
                    mode: 'lines',
                    line: { color: colors[key], width: 2, dash: key === 'derivative_central' ? 'solid' : 'dot' },
                    hovertemplate: '%{y:.4f}<extra></extra>'
                });
            }

            const layout = {
                plot_bgcolor: '#0a0a0a',
                paper_bgcolor: '#1a1a1a',
                font: { family: 'Inter, sans-serif', color: '#9a9a9a', size: 11 },
                xaxis: {
                    gridcolor: '#2a2a2a',
                    linecolor: '#2a2a2a',
                    zerolinecolor: '#2a2a2a',
                    showline: false,
                    title: ''
                },
                yaxis: {
                    gridcolor: '#2a2a2a',
                    linecolor: '#2a2a2a',
                    zerolinecolor: '#2a2a2a',
                    showline: false,
                    title: ''
                },
                legend: {
                    x: 0.02,
                    y: 0.98,
                    bgcolor: 'rgba(26,26,26,0.9)',
                    bordercolor: '#2a2a2a',
                    borderwidth: 1,
                    font: { size: 11 }
                },
                hovermode: 'x unified',
                margin: { t: 20, b: 40, l: 50, r: 20 },
                height: 400
            };

            Plotly.newPlot('main-plot', traces, layout, {
                responsive: true,
                displayModeBar: false
            });
        }

        function createMetricCards(data) {
            const grid = document.getElementById('metrics-grid');
            let bestMethod = null;
            let bestSMAPE = Infinity;

            for (const [key, forecast] of Object.entries(data.forecasts)) {
                if (forecast.metrics.sMAPE < bestSMAPE) {
                    bestSMAPE = forecast.metrics.sMAPE;
                    bestMethod = key;
                }
            }

            for (const [key, forecast] of Object.entries(data.forecasts)) {
                const isBest = key === bestMethod;
                const card = document.createElement('div');
                card.className = `metric-card${isBest ? ' best' : ''}`;
                card.innerHTML = `
                    <div class="metric-header">
                        <div class="method-name">${forecast.name}</div>
                        <div class="smape${isBest ? ' best' : ''}">${forecast.metrics.sMAPE.toFixed(1)}</div>
                    </div>
                    <div class="method-desc">${forecast.description}</div>
                    <div class="metrics-row">
                        <div class="metric-item">
                            <div class="metric-item-label">MAE</div>
                            <div class="metric-item-value">${forecast.metrics.MAE.toFixed(3)}</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-item-label">RMSE</div>
                            <div class="metric-item-value">${forecast.metrics.RMSE.toFixed(3)}</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-item-label">Corr</div>
                            <div class="metric-item-value">
                                ${(forecast.metadata.correlation || forecast.metadata.derivative_correlation).toFixed(2)}
                            </div>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            }
        }
    </script>
</body>
</html>
