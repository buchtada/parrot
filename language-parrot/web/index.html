<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø·ÙˆØ·ÛŒ Ø®Ù„ - Tuti Parrot</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/attention.css">
    <link rel="stylesheet" href="css/scene-builder.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Scheherazade+New:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Background Pattern -->
    <div class="bg-pattern"></div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <span class="parrot-icon">ğŸ¦œ</span>
                <div class="logo-text">
                    <h1 class="logo-primary">Tuti Parrot</h1>
                    <p class="logo-secondary">Ø·ÙˆØ·ÛŒ Ø®Ù„</p>
                </div>
            </div>
            <nav class="nav">
                <button class="nav-btn active" data-view="home">Home</button>
                <button class="nav-btn" data-view="lessons">Lessons</button>
                <button class="nav-btn" data-view="patterns">Patterns</button>
                <button class="nav-btn" data-view="scene">Scene Builder</button>
                <button class="nav-btn" data-view="progress">Progress</button>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <div class="container">

            <!-- Home View -->
            <section id="home-view" class="view active">
                <div class="hero">
                    <h2 class="hero-title">Learn Languages Through Parroting</h2>
                    <p class="hero-subtitle">Master Farsi through repetition, mimicry, and pattern recognition</p>
                    <div class="hero-stats">
                        <div class="stat">
                            <div class="stat-number" id="total-phrases">0</div>
                            <div class="stat-label">Phrases</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number" id="total-lessons">0</div>
                            <div class="stat-label">Lessons</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number" id="mastered-count">0</div>
                            <div class="stat-label">Mastered</div>
                        </div>
                    </div>
                    <button class="btn-primary" onclick="navigateToLessons()">Start Learning</button>
                </div>

                <div class="methodology">
                    <h3 class="section-title">The Parroting Methodology</h3>
                    <div class="method-grid">
                        <div class="method-card">
                            <div class="method-icon">ğŸ‘‚</div>
                            <h4>Listen-Repeat</h4>
                            <p>Train your ears and mouth for new sounds</p>
                        </div>
                        <div class="method-card">
                            <div class="method-icon">ğŸ—£ï¸</div>
                            <h4>Shadowing</h4>
                            <p>Develop natural rhythm and flow</p>
                        </div>
                        <div class="method-card">
                            <div class="method-icon">ğŸ”</div>
                            <h4>Pattern Drill</h4>
                            <p>Internalize language structure</p>
                        </div>
                        <div class="method-card">
                            <div class="method-icon">âš¡</div>
                            <h4>Progressive Speed</h4>
                            <p>Build muscle memory</p>
                        </div>
                        <div class="method-card">
                            <div class="method-icon">ğŸ§ </div>
                            <h4>Memory Recall</h4>
                            <p>Test retention and fluency</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Lessons View -->
            <section id="lessons-view" class="view">
                <h2 class="page-title">Farsi Lessons</h2>
                <div id="lessons-list" class="lessons-grid">
                    <!-- Lessons will be loaded here -->
                </div>
            </section>

            <!-- Lesson Detail View -->
            <section id="lesson-detail-view" class="view">
                <button class="btn-back" onclick="navigateToLessons()">â† Back to Lessons</button>
                <div id="lesson-content">
                    <!-- Lesson details will be loaded here -->
                </div>
            </section>

            <!-- Patterns View (Attention Visualization) -->
            <section id="patterns-view" class="view">
                <div id="attention-content">
                    <!-- Attention visualization will be loaded here -->
                </div>
            </section>

            <!-- Scene Builder View -->
            <section id="scene-view" class="view">
                <div class="scene-builder">
                    <div class="scene-header">
                        <h2 class="scene-title">ğŸ“¸ Scene-Based Lesson Builder</h2>
                        <p class="scene-subtitle">
                            Upload a photo â†’ AI detects objects â†’ Overlays Farsi â†’ Generates custom lesson<br>
                            Learn vocabulary in context from real scenes!
                        </p>
                    </div>

                    <!-- Upload Zone -->
                    <div class="upload-zone" id="upload-zone">
                        <div class="upload-icon">ğŸ“·</div>
                        <div class="upload-text">Click or drag image here</div>
                        <div class="upload-hint">Upload a photo of a kitchen, street, park, or any scene</div>
                        <input type="file" id="image-upload" accept="image/*">
                    </div>

                    <!-- Canvas Container -->
                    <div class="canvas-container" id="canvas-container">
                        <canvas id="scene-canvas"></canvas>
                    </div>

                    <!-- Controls -->
                    <div class="annotation-controls">
                        <button class="control-btn" id="detect-btn" onclick="detectObjects()" disabled>
                            ğŸ” Detect Objects
                        </button>
                        <button class="control-btn" id="overlay-btn" onclick="overlayFarsiLabels()" disabled>
                            ğŸ·ï¸ Overlay Farsi Labels
                        </button>
                        <button class="control-btn" id="generate-btn" onclick="generateLesson()" disabled>
                            âœ¨ Generate Lesson
                        </button>
                    </div>

                    <!-- Detection Progress -->
                    <div class="detection-progress" id="detection-progress">
                        <div class="progress-spinner"></div>
                        <div class="progress-text">Detecting objects in your image...</div>
                    </div>

                    <!-- Detected Objects -->
                    <div class="detected-objects" id="detected-objects">
                        <h3 class="objects-header">ğŸ¯ Detected Objects</h3>
                        <div class="objects-grid" id="objects-list">
                            <!-- Objects will be loaded here -->
                        </div>
                    </div>

                    <!-- Lesson Preview -->
                    <div class="lesson-preview" id="lesson-preview">
                        <div class="lesson-preview-header">
                            <h3 class="lesson-preview-title">ğŸ“š Generated Vocabulary Lesson</h3>
                            <p class="lesson-preview-desc">Learn these words from your scene</p>
                        </div>

                        <div class="vocabulary-grid" id="vocabulary-grid">
                            <!-- Vocabulary cards will be loaded here -->
                        </div>

                        <div class="pattern-analysis">
                            <h4>ğŸ¯ Pattern Analysis</h4>
                            <ul class="pattern-list" id="pattern-list">
                                <!-- Pattern analysis will be loaded here -->
                            </ul>
                        </div>

                        <button class="save-lesson-btn" onclick="saveLesson()">
                            ğŸ’¾ Download Lesson as JSON
                        </button>
                    </div>
                </div>
            </section>

            <!-- Progress View -->
            <section id="progress-view" class="view">
                <h2 class="page-title">Your Progress</h2>
                <div id="progress-content" class="progress-container">
                    <!-- Progress will be displayed here -->
                </div>
            </section>

        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>Ø·ÙˆØ·ÛŒ Ø®Ù„ - Learning through parroting, inspired by Persian art and culture</p>
        </div>
    </footer>

    <!-- TensorFlow.js for object detection (optional - falls back to demo mode) -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd"></script>

    <script src="js/farsi-vocabulary.js"></script>
    <script src="js/app.js"></script>
    <script src="js/attention.js"></script>
    <script src="js/scene-builder.js"></script>
</body>
</html>
